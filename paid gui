local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

if not Rayfield then
    warn("Failed to load Rayfield library")
    return
end

local Window = Rayfield:CreateWindow({
    Name = "Vision Hub",
    LoadingTitle = "Vision Script",
    LoadingSubtitle = "by Vision",
    ConfigurationSaving = {
       Enabled = false,
       FileName = "Vision Script Hub"
    },
    Discord = {
       Enabled = true,
       Invite = "GYH92be25Z",
       RememberJoins = true
    },
    KeySystem = false,
    KeySettings = {
       Title = "Vision Script Hub| Key",
       Subtitle = "Link In Discord Server",
       Note = "Join Server From Misc Tab",
       FileName = "BladeBallKey",
       SaveKey = false,
       GrabKeyFromSite = true,
       Key = {"https://pastebin.com/raw/QZYyHa0H"}
    }
})

if not Window then
    warn("Failed to create window.")
    return
end

local TrackTab = Window:CreateTab("Track", nil)
local MainSection = TrackTab:CreateSection("Main")

-- SERVICES
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local player = Players.LocalPlayer

-- =======================
-- SPEED SETTINGS
-- =======================
local SpeedEnabled = false
local SpeedValue = 0
local SpeedConnection

TrackTab:CreateToggle({
    Name = "Speed",
    CurrentValue = false,
    Flag = "SpeedToggle",
    Callback = function(Value)
        SpeedEnabled = Value

        if SpeedEnabled then
            SpeedConnection = RunService.RenderStepped:Connect(function()
                local char = player.Character
                if not char then return end

                local hrp = char:FindFirstChild("HumanoidRootPart")
                local hum = char:FindFirstChildOfClass("Humanoid")
                if not hrp or not hum then return end

                local moveDir = hum.MoveDirection
                if moveDir.Magnitude > 0 then
                    hrp.CFrame = hrp.CFrame + (moveDir * SpeedValue)
                end
            end)
        else
            if SpeedConnection then
                SpeedConnection:Disconnect()
                SpeedConnection = nil
            end
        end
    end,
})

TrackTab:CreateSlider({
    Name = "Speed Amount",
    Range = {0, 2},
    Increment = 0.01,
    Suffix = "Speed",
    CurrentValue = 0,
    Flag = "SpeedSlider",
    Callback = function(Value)
        SpeedValue = Value
    end,
})

-- =======================
-- JUMP POWER SETTINGS
-- =======================
local JumpPowerEnabled = false
local JumpPowerValue = 75

local function applyJump()
    if not JumpPowerEnabled then return end

    local char = player.Character
    if not char then return end

    local hum = char:FindFirstChildOfClass("Humanoid")
    if not hum then return end

    hum.UseJumpPower = true
    hum.JumpPower = JumpPowerValue
end

player.CharacterAdded:Connect(function()
    task.wait(0.2)
    applyJump()
end)

TrackTab:CreateToggle({
    Name = "Jump Power(dontuse)",
    CurrentValue = false,
    Flag = "JumpToggle",
    Callback = function(Value)
        JumpPowerEnabled = Value
        applyJump()
    end,
})

TrackTab:CreateSlider({
    Name = "Jump Power Amount",
    Range = {50, 100},
    Increment = 1,
    Suffix = "JP",
    CurrentValue = 75,
    Flag = "JumpSlider",
    Callback = function(Value)
        JumpPowerValue = Value
        applyJump()
    end,
})

-- =======================
-- INFINITE JUMP
-- =======================
local InfiniteJumpEnabled = false
local InfiniteJumpConnection

TrackTab:CreateToggle({
    Name = "Infinite Jump",
    CurrentValue = false,
    Flag = "InfiniteJumpToggle",
    Callback = function(Value)
        InfiniteJumpEnabled = Value

        if InfiniteJumpEnabled then
            InfiniteJumpConnection = UserInputService.JumpRequest:Connect(function()
                local char = player.Character
                if not char then return end

                local humanoid = char:FindFirstChildOfClass("Humanoid")
                if humanoid then
                    humanoid:ChangeState(Enum.HumanoidStateType.Jumping)
                end
            end)
        else
            if InfiniteJumpConnection then
                InfiniteJumpConnection:Disconnect()
                InfiniteJumpConnection = nil
            end
        end
    end,
})

--// UI TOGGLE (Put in PhysicsTab)

local burstBoostEnabled = false

local burstBoostToggle = TrackTab:CreateToggle({
    Name = "Auto Speed Boost",
    CurrentValue = false,
    Flag = "Burst_Boost_Toggle",
    Callback = function(v)
        burstBoostEnabled = v
    end,
})

--// SCRIPT

repeat task.wait() until game:IsLoaded()

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")

local player = Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")
local hrp = character:WaitForChild("HumanoidRootPart")

player.CharacterAdded:Connect(function(char)
    character = char
    humanoid = char:WaitForChild("Humanoid")
    hrp = char:WaitForChild("HumanoidRootPart")
end)

-- SETTINGS
local boostStrength = 4
local boostDuration = 0.15
local boostCooldown = 2

local boosting = false
local lastBoost = 0

RunService.Heartbeat:Connect(function()
    if not burstBoostEnabled then return end
    if not humanoid or not hrp then return end

    local moveDir = humanoid.MoveDirection
    if moveDir.Magnitude == 0 then return end

    if tick() - lastBoost >= boostCooldown and not boosting then
        boosting = true
        lastBoost = tick()

        task.spawn(function()
            local startTime = tick()
            while tick() - startTime < boostDuration and burstBoostEnabled do
                hrp.CFrame = hrp.CFrame + (moveDir * boostStrength)
                RunService.Heartbeat:Wait()
            end
            boosting = false
        end)
    end
end)
